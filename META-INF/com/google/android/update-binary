#!/system/bin/sh
# Standard Shell update-binary for Magisk/KSU

# 参数: $1=API等级, $2=模块路径(MODPATH), $3=ZIP文件路径
umask 022

MODPATH="$2"
ZIPFILE="$3"

# 强制解压
unzip -o "$ZIPFILE" -d "$MODPATH" >&2

# 执行自定义逻辑
if [ -f "$MODPATH/customize.sh" ]; then
    chmod 755 "$MODPATH/customize.sh"
    cd "$MODPATH"
    sh "$MODPATH/customize.sh"
fi
